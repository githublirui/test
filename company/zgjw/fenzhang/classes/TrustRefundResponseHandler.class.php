<?php/** * 委托退款关系变更应答类 * ============================================================================ * api说明： * getKey()/setKey(),获取/设置密钥 * getParameter()/setParameter(),获取/设置参数值 * getAllParameters(),获取所有参数 * isTenpaySign(),是否财付通签名,true:是 false:否 * doShow(),显示处理结果 * getDebugInfo(),获取debug信息 *  * ============================================================================ * */require ("ResponseHandler.class.php");class TrustRefundResponseHandler extends ResponseHandler {		/**	*@Override	*/	function isTenpaySign() {		//获取参数		$cmdno = $this->getParameter("cmdno");		$spid = $this->getParameter("spid");		$uin = $this->getParameter("uin");		$status = $this->getParameter("status");				$key = $this->getKey();				$signPars = "";		//组织签名串		$signPars = "cmdno=" . $cmdno . "&" .				"spid=" . $spid . "&" .				"uin=" . $uin . "&" .				"status=" . $status . 				$key;						$sign = strtolower(md5($signPars));				$tenpaySign = strtolower($this->getParameter("cftsign"));				//debug信息		$this->_setDebugInfo($signPars . " => sign:" . $sign .				" tenpaySign:" . $tenpaySign);				return $sign == $tenpaySign;			}	}?>
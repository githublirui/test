<?php

$pm25CitysCode = array(
    '1' => 'shijiazhuang',
    '2' => 'tangshan',
    '3' => 'qinhuangdao',
    '4' => 'handan',
    '5' => 'xingtai',
    '6' => 'baoding',
    '7' => 'zhangjiakou',
    '8' => 'chengde',
    '9' => 'cangzhou',
    '10' => 'langfang',
    '11' => 'hengshui',
    '12' => 'beijing',
    '13' => 'shanghai',
    '14' => 'tianjin',
    '15' => 'chongqing',
    '16' => 'guangzhou',
    '17' => 'shenzhen',
    '18' => 'zhuhai',
    '19' => 'shantou',
    '20' => 'foshan',
    '21' => 'jiangmen',
    '22' => 'maoming',
    '23' => 'huizhou',
    '24' => 'dongguan',
    '25' => 'zhongshan',
    '26' => 'hangzhou',
    '27' => 'ningbo',
    '28' => 'wenzhou',
    '29' => 'jiaxing',
    '30' => 'huzhou',
    '31' => 'shaoxing',
    '32' => 'jinhua',
    '33' => 'quzhou',
    '34' => 'zhoushan',
    '35' => 'taizhou',
    '36' => 'guiyang',
    '38' => 'zunyi',
    '45' => 'chengdu',
    '46' => 'zigong',
    '47' => 'luzhou',
    '48' => 'deyang',
    '49' => 'mianyang',
    '50' => 'leshan',
    '51' => 'nanchong',
    '52' => 'yibin',
    '53' => 'dazhou',
    '54' => 'liangshan',
    '55' => 'shenyang',
    '56' => 'dalian',
    '57' => 'anshan',
    '58' => 'fushun',
    '59' => 'dandong',
    '60' => 'jinzhou',
    '61' => 'yingkou',
    '62' => 'liaoyang',
    '63' => 'panjin',
    '64' => 'huludao',
    '65' => 'nanjing',
    '66' => 'wuxi',
    '67' => 'suzhou',
    '68' => 'xuzhou',
    '69' => 'changzhou',
    '70' => 'nantong',
    '71' => 'lianyungang',
    '72' => 'huaian',
    '73' => 'yancheng',
    '74' => 'yangzhou',
    '75' => 'fuzhou',
    '76' => 'xiamen',
    '77' => 'putian',
    '78' => 'sanming',
    '79' => 'quanzhou',
    '80' => 'zhangzhou',
    '81' => 'nanping',
    '82' => 'longyan',
    '84' => 'changchun',
    '85' => 'jilin',
    '93' => 'haerbin',
    '94' => 'qiqihaer',
    '98' => 'daqing',
    '103' => 'zhengzhou',
    '104' => 'luoyang',
    '105' => 'pingdingshan',
    '106' => 'jiaozuo',
    '107' => 'hebi',
    '108' => 'xinxiang',
    '109' => 'anyang',
    '110' => 'luohe',
    '111' => 'nanyang',
    '113' => 'jinan',
    '114' => 'qingdao',
    '115' => 'zibo',
    '116' => 'zaozhuang',
    '117' => 'dongying',
    '118' => 'yantai',
    '119' => 'weifang',
    '120' => 'weihai',
    '121' => 'laiwu',
    '122' => 'binzhou',
    '123' => 'hefei',
    '124' => 'wuhu',
    '125' => 'bengpu',
    '126' => 'maanshan',
    '127' => 'anqing',
    '128' => 'chuzhou',
    '129' => 'fuyang',
    '130' => 'suzhoushi',
    '131' => 'chaohushi',
    '132' => 'liuan',
    '133' => 'liuzhou',
    '134' => 'guilin',
    '142' => 'nanning',
    '143' => 'haikou',
    '144' => 'sanya',
    '145' => 'huhehaote',
    '146' => 'baotou',
    '147' => 'wuhai',
    '148' => 'chifeng',
    '149' => 'tongliao',
    '150' => 'eerduozi',
    '151' => 'hulunbeier',
    '152' => 'bayanchuoer',
    '154' => 'xingan',
    '153' => 'wulanchabu',
    '155' => 'taiyuan',
    '156' => 'datong',
    '157' => 'yangquan',
    '158' => 'changzhi',
    '159' => 'jincheng',
    '160' => 'shuozhou',
    '161' => 'jinzhong',
    '162' => 'yuncheng',
    '163' => 'qizhou',
    '164' => 'linfen',
    '165' => 'yinchuan',
    '166' => 'lanzhou',
    '167' => 'jinchang',
    '176' => 'xian',
    '177' => 'tongchuan',
    '178' => 'baoji',
    '179' => 'xianyang',
    '180' => 'weinan',
    '181' => 'yanan',
    '186' => 'xining',
    '194' => 'wuhan',
    '195' => 'huangshi',
    '196' => 'xiangyan',
    '197' => 'shiyan',
    '198' => 'jingzhou',
    '199' => 'yichang',
    '200' => 'jingmen',
    '201' => 'ezhou',
    '202' => 'xiantao',
    '203' => 'qianjiang',
    '204' => 'changsha',
    '205' => 'zhuzhou',
    '206' => 'xiangtan',
    '207' => 'hengyang',
    '208' => 'shaoyang',
    '209' => 'yueyang',
    '210' => 'changde',
    '211' => 'zhuzhoushi',
    '212' => 'yongzhou',
    '213' => 'loudi',
    '214' => 'nanchang',
    '215' => 'jingdezhen',
    '216' => 'pingxiang',
    '217' => 'jiujiang',
    '218' => 'xinyu',
    '219' => 'yingtan',
    '220' => 'ganzhou',
    '221' => 'jian',
    '222' => 'yichun',
    '223' => 'fuzhoushi',
    '224' => 'shangrao',
    '225' => 'kunming',
    '226' => 'qujing',
    '227' => 'yuxi',
    '228' => 'baoshan',
    '229' => 'shaotong',
    '230' => 'lijiang',
    '232' => 'lincang',
    '233' => 'wenshan',
    '234' => 'honghe',
    '235' => 'xishuangbanna',
    '236' => 'chuxiong',
    '237' => 'dali',
    '238' => 'dehong',
    '239' => 'lujiang',
    '240' => 'diqing',
    '241' => 'wulumuqi',
    '242' => 'kelamayi',
    '256' => 'lasa',
    '257' => 'changdu',
    '258' => 'shannan',
    '259' => 'rikaze',
    '260' => 'naqu',
    '261' => 'alidiqu',
    '262' => 'linzhi',
    '263' => 'shaoguan',
    '264' => 'zhanjiang',
    '265' => 'zhaoqing',
    '266' => 'meizhou',
    '267' => 'shanwei',
    '268' => 'heyuan',
    '269' => 'yangjiang',
    '270' => 'qingyuan',
    '271' => 'chaozhou',
    '272' => 'jieyang',
    '273' => 'yunfu',
    '274' => 'panzhihua',
    '275' => 'guangyuan',
    '276' => 'suiing',
    '277' => 'neijing',
    '278' => 'guangan',
    '279' => 'meishan',
    '280' => 'yaan',
    '281' => 'bazhong',
    '282' => 'ziyang',
    '283' => 'anba',
    '284' => 'ganzi',
    '285' => 'lishui',
    '286' => 'benxi',
    '287' => 'fuxin',
    '288' => 'tieling',
    '289' => 'chaoyang',
    '290' => 'zhenjiang',
    '291' => 'taizhoushi',
    '292' => 'suqian',
    '293' => 'kaifeng',
    '294' => 'puyang',
    '295' => 'xuchang',
    '296' => 'sanmenxia',
    '297' => 'shangqiu',
    '298' => 'xinyang',
    '299' => 'zhoukou',
    '300' => 'zhumadian',
    '302' => 'mudanjiang',
    '304' => 'jining',
    '305' => 'taian',
    '306' => 'rizhao',
    '307' => 'linyi',
    '308' => 'dezhou',
    '309' => 'liaocheng',
    '310' => 'huainan',
    '311' => 'huaibei',
    '312' => 'tongling',
    '313' => 'huangshan',
    '314' => 'bozhou',
    '315' => 'chizhou',
    '316' => 'xuancheng',
    '317' => 'beihai',
    '321' => 'xiligule',
    '322' => 'alashanmeng',
    '323' => 'luliang',
    '327' => 'xiaogan',
    '328' => 'huanggan',
    '329' => 'xianning',
    '330' => 'suizhou',
    '331' => 'enshi',
    '332' => 'tianmen',
    '333' => 'shennongjia',
    '334' => 'zhangjiajie',
    '335' => 'yiyang',
    '338' => 'heze',
    '339' => 'shizuishan',
    '343' => 'jiayuguan',
    '344' => 'hongkong',
    '345' => 'macau',
    '373' => 'kuerle',
);
header('Content-type: text/html; charset=utf-8');

//$wjson = file_get_contents('allcity.txt'); //所有pm25监控城市
//$data = json_decode($wjson, true);
//
//foreach ($data as $_data) {
//    $cityPm[$_data['CityName']] = $_data['CityCode'];
//}
//var_dump($cityPm);
//die;
/*
  $file = 'areaid.txt';
  $fhandle = fopen($file, 'r');
  while (!feof($fhandle)) {
  $line = fgets($fhandle);
  if (!$line) {
  continue;
  }
  $arr = explode("\t", $line);
  $arrAreaId[$arr[2]] = $arr[0];
  }
 * 
 */
$handle = @mysqli_connect('10.3.255.21', 'off_mymsc', 'hpctiEepEIty', 'management', '3311');
$sql = "select * from city";
$result = mysqli_query($handle, $sql);
while ($row = mysqli_fetch_assoc($result)) {
    if (!array_key_exists($row['city_id'], $pm25CitysCode)) {
        $a[] = $row['city_name'];
    }
    //生成pm25 code
//    if (isset($cityPm[$row['city_name']])) {
//        file_put_contents('citypmId.txt', "'" . $row['city_id'] . "'" . '=>' . "'" . $cityPm[$row['city_name']] . "'" . ',' . "\n", FILE_APPEND);
//    } else {
//        file_put_contents('nocitypmId.txt', "'" . $row['city_id'] . "'" . '=>' . "'" . $row['city_name'] . "'" . ',' . "\n", FILE_APPEND);
//    }
    //生成cityarea文件
    //    if (isset($arrAreaId[$row['short_name']])) {
    //        file_put_contents('cityAreaId.txt', "'" . $row['city_id'] . "'" . '=>' . "'" . $arrAreaId[$row['short_name']] . "'" . ',' . "\n", FILE_APPEND);
    //    } else {
    //        file_put_contents('nocityAreaId.txt', "'" . $row['city_id'] . "'" . '=>' . "'" . $row['short_name'] . "'" . ',' . "\n", FILE_APPEND);
    //    }
}
var_dump($a);
die;
?>
